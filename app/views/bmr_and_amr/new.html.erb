<!-- app/views/bmr_and_amr/new.html.erb -->
<h1>BMR and AMR Calculator</h1>

<%= form_with url: calculate_bmr_and_amr_path, method: :post, local: true do %>
  <div>
    <%= label_tag :weight, "Weight (kg)" %>
    <%= number_field_tag :weight, current_user.weight, required: true %>
  </div>

  <div>
    <%= label_tag :height, "Height (cm)" %>
    <%= number_field_tag :height, current_user.height, required: true, readonly: true %>
  </div>

  <div>
    <%= label_tag :age, "Age" %>
    <%= number_field_tag :age, current_user.age, required: true, readonly: true %>
  </div>

  <div>
    <%= label_tag :gender, "Gender" %>
    <%= select_tag :gender, options_for_select([['Select Gender', ''], ['Male', 'male'], ['Female', 'female'], ['Other', 'other']], selected: current_user.sex), disabled: true %>
  </div>

  <div>
    <%= label_tag :activity_level, "Activity Level" %>
    <%= select_tag :activity_level, options_for_select([
      ['Sedentary', 'Sedentary'], 
      ['Low Active', 'Low Active'], 
      ['Moderately Active', 'Moderately Active'], 
      ['Active', 'Active'], 
      ['Very Active', 'Very Active']
    ], selected: current_user.current_activity_level), required: true %>
  </div>

  <div class="actions">
    <%= submit_tag "Calculate" %>
  </div>
<% end %>

<% if @bmr && @amr %>
  <h2>Results</h2>
  <p>BMR: <%= @bmr %></p>
  <p>AMR: <%= @amr %></p>
<% end %>
